{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/mo7am/OneDrive/Desktop/AnimeU-main/AnimeU-main/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _slicedToArray from\"C:/Users/mo7am/OneDrive/Desktop/AnimeU-main/AnimeU-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _asyncToGenerator from\"C:/Users/mo7am/OneDrive/Desktop/AnimeU-main/AnimeU-main/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{useState}from\"react\";import\"./MediaQueries.css\";import Content from\"./features/list/Content\";import AnimeDetails from\"./features/info/AnimeDetails\";import{ControlBar}from\"./features/list/ControlBar\";import Card from\"./features/list/Card\";import Loader from\"./ui/Loader\";import{useQuery}from\"@tanstack/react-query\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function getData(_x){return _getData.apply(this,arguments);}function _getData(){_getData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(query){var res,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(query!==\"\")){_context.next=6;break;}_context.next=3;return fetch(\"https://api.jikan.moe/v4/anime?q=\".concat(query,\"&sfw=true\"));case 3:res=_context.sent;_context.next=9;break;case 6:_context.next=8;return fetch(\"https://api.jikan.moe/v4/anime?q&sfw=true\");case 8:res=_context.sent;case 9:if(res.ok){_context.next=11;break;}throw new Error(\"Response Was not Okay\");case 11:_context.next=13;return res.json();case 13:data=_context.sent;return _context.abrupt(\"return\",data);case 15:case\"end\":return _context.stop();}},_callee);}));return _getData.apply(this,arguments);}export default function Anime(){var _data$data3;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),chosen=_useState2[0],setChosen=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),isBack=_useState4[0],setIsBack=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),query=_useState6[0],setQuery=_useState6[1];var _useQuery=useQuery({queryKey:[\"animeData\",query],queryFn:function queryFn(){return getData(query);}}),isLoading=_useQuery.isLoading,data=_useQuery.data;function handleIsBack(){setIsBack(function(isBack){return!isBack;});}function handleSearch(queryValue){setIsBack(true);setQuery(queryValue);}function handleChoice(chosenAnime){setChosen(chosenAnime);handleIsBack();}function handleSort(sortType){var _data$data,_data$data2;setIsBack(true);switch(sortType){case\"name\":data===null||data===void 0?void 0:(_data$data=data.data)===null||_data$data===void 0?void 0:_data$data.result.slice().sort(function(a,b){return a.title.localeCompare(b.title);});break;case\"epi\":data===null||data===void 0?void 0:(_data$data2=data.data)===null||_data$data2===void 0?void 0:_data$data2.result.slice().sort(function(a,b){return(a===null||a===void 0?void 0:a.episodes)-(b===null||b===void 0?void 0:b.episodes);});break;default:console.log(\"something Went Wrong\");}}return/*#__PURE__*/_jsxs(\"div\",{className:\"anime\",children:[/*#__PURE__*/_jsx(ControlBar,{search:query,onSearch:handleSearch,onSort:handleSort}),isBack?/*#__PURE__*/_jsx(Content,{children:isLoading?/*#__PURE__*/_jsx(Loader,{}):data===null||data===void 0?void 0:(_data$data3=data.data)===null||_data$data3===void 0?void 0:_data$data3.map(function(el){return/*#__PURE__*/_jsx(Card,{animeData:el,onChoice:handleChoice});})}):/*#__PURE__*/_jsx(AnimeDetails,{chosenAnime:chosen,onBack:handleIsBack})]});}","map":{"version":3,"names":["useState","Content","AnimeDetails","ControlBar","Card","Loader","useQuery","jsx","_jsx","jsxs","_jsxs","getData","_x","_getData","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","query","res","data","wrap","_callee$","_context","prev","next","fetch","concat","sent","ok","Error","json","abrupt","stop","Anime","_data$data3","_useState","_useState2","_slicedToArray","chosen","setChosen","_useState3","_useState4","isBack","setIsBack","_useState5","_useState6","setQuery","_useQuery","queryKey","queryFn","isLoading","handleIsBack","handleSearch","queryValue","handleChoice","chosenAnime","handleSort","sortType","_data$data","_data$data2","result","slice","sort","a","b","title","localeCompare","episodes","console","log","className","children","search","onSearch","onSort","map","el","animeData","onChoice","onBack"],"sources":["C:/Users/mo7am/OneDrive/Desktop/AnimeU-main/AnimeU-main/src/Anime.js"],"sourcesContent":["import { useState } from \"react\";\nimport \"./MediaQueries.css\";\nimport Content from \"./features/list/Content\";\nimport AnimeDetails from \"./features/info/AnimeDetails\";\nimport { ControlBar } from \"./features/list/ControlBar\";\nimport Card from \"./features/list/Card\";\nimport Loader from \"./ui/Loader\";\nimport { useQuery } from \"@tanstack/react-query\";\n\nasync function getData(query) {\n  let res;\n  if (query !== \"\") {\n    res = await fetch(`https://api.jikan.moe/v4/anime?q=${query}&sfw=true`);\n  } else {\n    res = await fetch(`https://api.jikan.moe/v4/anime?q&sfw=true`);\n  }\n\n  if (!res.ok) {\n    throw new Error(\"Response Was not Okay\");\n  }\n\n  const data = await res.json();\n  return data;\n}\n\nexport default function Anime() {\n  const [chosen, setChosen] = useState({});\n  const [isBack, setIsBack] = useState(true);\n  const [query, setQuery] = useState(\"\");\n  const { isLoading, data } = useQuery({\n    queryKey: [\"animeData\", query],\n    queryFn: () => getData(query),\n  });\n\n  function handleIsBack() {\n    setIsBack((isBack) => !isBack);\n  }\n\n  function handleSearch(queryValue) {\n    setIsBack(true);\n    setQuery(queryValue);\n  }\n\n  function handleChoice(chosenAnime) {\n    setChosen(chosenAnime);\n    handleIsBack();\n  }\n\n  function handleSort(sortType) {\n    setIsBack(true);\n    switch (sortType) {\n      case \"name\":\n        data?.data?.result\n          .slice()\n          .sort((a, b) => a.title.localeCompare(b.title));\n        break;\n      case \"epi\":\n        data?.data?.result.slice().sort((a, b) => a?.episodes - b?.episodes);\n        break;\n      default:\n        console.log(\"something Went Wrong\");\n    }\n  }\n\n  return (\n    <div className=\"anime\">\n      <ControlBar search={query} onSearch={handleSearch} onSort={handleSort} />\n      {isBack ? (\n        <Content>\n          {isLoading ? (\n            <Loader />\n          ) : (\n            data?.data?.map((el) => (\n              <Card animeData={el} onChoice={handleChoice} />\n            ))\n          )}\n        </Content>\n      ) : (\n        <AnimeDetails chosenAnime={chosen} onBack={handleIsBack} />\n      )}\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}