{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useRef, useState } from \"react\";\nexport default function useFetch() {\n  _s();\n  const [query, setQuery] = useState(\"\");\n  const [displayedData, setDisplayedData] = useState([]);\n  const initialData = useRef([]);\n  const [isLoading, setIsLoading] = useState(false);\n  useEffect(function () {\n    const controller = new AbortController();\n    async function getData() {\n      try {\n        setIsLoading(true);\n        const res = await fetch(`https://api.jikan.moe/v4/anime?q=${query}&sfw=false`, {\n          signal: controller.signal\n        });\n        const data = await res.json();\n        setDisplayedData(data.data);\n      } catch (err) {\n        if (err.name !== \"AbortError\") {\n          console.log(err.message);\n        }\n      } finally {\n        setIsLoading(false);\n      }\n    }\n    if (query.length < 3) {\n      setDisplayedData(initialData.current);\n      return;\n    }\n    getData();\n    return function () {\n      controller.abort();\n    };\n  }, [query]);\n  useEffect(function () {\n    async function getInitialData() {\n      try {\n        setIsLoading(true);\n        const res = await fetch(`https://api.jikan.moe/v4/anime?q&sfw=true`);\n        const data = await res.json();\n        initialData.current = data.data;\n        setDisplayedData(data.data);\n      } catch (err) {\n        console.log(err.message);\n      } finally {\n        setIsLoading(false);\n      }\n    }\n    getInitialData();\n  }, []);\n  console.log(isLoading);\n  return [query, setQuery, displayedData, setDisplayedData, isLoading];\n}\n_s(useFetch, \"Xd0NZtMBimxi6SXjp3d2QDVAip0=\");","map":{"version":3,"names":["useEffect","useRef","useState","useFetch","_s","query","setQuery","displayedData","setDisplayedData","initialData","isLoading","setIsLoading","controller","AbortController","getData","res","fetch","signal","data","json","err","name","console","log","message","length","current","abort","getInitialData"],"sources":["C:/Users/mo7am/OneDrive/Desktop/AnimeU-main/AnimeU-main/src/hooks/useFetch.js"],"sourcesContent":["import { useEffect, useRef, useState } from \"react\";\r\n\r\nexport default function useFetch() {\r\n  const [query, setQuery] = useState(\"\");\r\n  const [displayedData, setDisplayedData] = useState([]);\r\n  const initialData = useRef([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  useEffect(\r\n    function () {\r\n      const controller = new AbortController();\r\n      async function getData() {\r\n        try {\r\n          setIsLoading(true);\r\n\r\n          const res = await fetch(\r\n            `https://api.jikan.moe/v4/anime?q=${query}&sfw=false`,\r\n            {\r\n              signal: controller.signal,\r\n            }\r\n          );\r\n          const data = await res.json();\r\n          setDisplayedData(data.data);\r\n        } catch (err) {\r\n          if (err.name !== \"AbortError\") {\r\n            console.log(err.message);\r\n          }\r\n        } finally {\r\n          setIsLoading(false);\r\n        }\r\n      }\r\n\r\n      if (query.length < 3) {\r\n        setDisplayedData(initialData.current);\r\n        return;\r\n      }\r\n\r\n      getData();\r\n\r\n      return function () {\r\n        controller.abort();\r\n      };\r\n    },\r\n    [query]\r\n  );\r\n\r\n  useEffect(function () {\r\n    async function getInitialData() {\r\n      try {\r\n        setIsLoading(true);\r\n        const res = await fetch(`https://api.jikan.moe/v4/anime?q&sfw=true`);\r\n        const data = await res.json();\r\n        initialData.current = data.data;\r\n        setDisplayedData(data.data);\r\n      } catch (err) {\r\n        console.log(err.message);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    }\r\n    getInitialData();\r\n  }, []);\r\n\r\n  console.log(isLoading);\r\n\r\n  return [query, setQuery, displayedData, setDisplayedData, isLoading];\r\n}\r\n"],"mappings":";AAAA,SAASA,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AAEnD,eAAe,SAASC,QAAQA,CAAA,EAAG;EAAAC,EAAA;EACjC,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGJ,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACK,aAAa,EAAEC,gBAAgB,CAAC,GAAGN,QAAQ,CAAC,EAAE,CAAC;EACtD,MAAMO,WAAW,GAAGR,MAAM,CAAC,EAAE,CAAC;EAC9B,MAAM,CAACS,SAAS,EAAEC,YAAY,CAAC,GAAGT,QAAQ,CAAC,KAAK,CAAC;EAEjDF,SAAS,CACP,YAAY;IACV,MAAMY,UAAU,GAAG,IAAIC,eAAe,EAAE;IACxC,eAAeC,OAAOA,CAAA,EAAG;MACvB,IAAI;QACFH,YAAY,CAAC,IAAI,CAAC;QAElB,MAAMI,GAAG,GAAG,MAAMC,KAAK,CACpB,oCAAmCX,KAAM,YAAW,EACrD;UACEY,MAAM,EAAEL,UAAU,CAACK;QACrB,CAAC,CACF;QACD,MAAMC,IAAI,GAAG,MAAMH,GAAG,CAACI,IAAI,EAAE;QAC7BX,gBAAgB,CAACU,IAAI,CAACA,IAAI,CAAC;MAC7B,CAAC,CAAC,OAAOE,GAAG,EAAE;QACZ,IAAIA,GAAG,CAACC,IAAI,KAAK,YAAY,EAAE;UAC7BC,OAAO,CAACC,GAAG,CAACH,GAAG,CAACI,OAAO,CAAC;QAC1B;MACF,CAAC,SAAS;QACRb,YAAY,CAAC,KAAK,CAAC;MACrB;IACF;IAEA,IAAIN,KAAK,CAACoB,MAAM,GAAG,CAAC,EAAE;MACpBjB,gBAAgB,CAACC,WAAW,CAACiB,OAAO,CAAC;MACrC;IACF;IAEAZ,OAAO,EAAE;IAET,OAAO,YAAY;MACjBF,UAAU,CAACe,KAAK,EAAE;IACpB,CAAC;EACH,CAAC,EACD,CAACtB,KAAK,CAAC,CACR;EAEDL,SAAS,CAAC,YAAY;IACpB,eAAe4B,cAAcA,CAAA,EAAG;MAC9B,IAAI;QACFjB,YAAY,CAAC,IAAI,CAAC;QAClB,MAAMI,GAAG,GAAG,MAAMC,KAAK,CAAE,2CAA0C,CAAC;QACpE,MAAME,IAAI,GAAG,MAAMH,GAAG,CAACI,IAAI,EAAE;QAC7BV,WAAW,CAACiB,OAAO,GAAGR,IAAI,CAACA,IAAI;QAC/BV,gBAAgB,CAACU,IAAI,CAACA,IAAI,CAAC;MAC7B,CAAC,CAAC,OAAOE,GAAG,EAAE;QACZE,OAAO,CAACC,GAAG,CAACH,GAAG,CAACI,OAAO,CAAC;MAC1B,CAAC,SAAS;QACRb,YAAY,CAAC,KAAK,CAAC;MACrB;IACF;IACAiB,cAAc,EAAE;EAClB,CAAC,EAAE,EAAE,CAAC;EAENN,OAAO,CAACC,GAAG,CAACb,SAAS,CAAC;EAEtB,OAAO,CAACL,KAAK,EAAEC,QAAQ,EAAEC,aAAa,EAAEC,gBAAgB,EAAEE,SAAS,CAAC;AACtE;AAACN,EAAA,CAhEuBD,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}