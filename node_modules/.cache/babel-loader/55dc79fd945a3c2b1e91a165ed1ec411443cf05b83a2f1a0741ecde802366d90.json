{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/mo7am/OneDrive/Desktop/AnimeU-main/AnimeU-main/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _slicedToArray from\"C:/Users/mo7am/OneDrive/Desktop/AnimeU-main/AnimeU-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _asyncToGenerator from\"C:/Users/mo7am/OneDrive/Desktop/AnimeU-main/AnimeU-main/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{useContext,useState}from\"react\";import{useQuery}from\"@tanstack/react-query\";import{createContext}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";function getData(_x){return _getData.apply(this,arguments);}function _getData(){_getData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(query){var res,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(query!==\"\")){_context.next=6;break;}_context.next=3;return fetch(\"https://api.jikan.moe/v4/anime?q=\".concat(query,\"&sfw=true\"));case 3:res=_context.sent;_context.next=9;break;case 6:_context.next=8;return fetch(\"https://api.jikan.moe/v4/anime?q&sfw=true\");case 8:res=_context.sent;case 9:if(res.ok){_context.next=11;break;}throw new Error(\"Response Was not Okay\");case 11:_context.next=13;return res.json();case 13:data=_context.sent;return _context.abrupt(\"return\",data);case 15:case\"end\":return _context.stop();}},_callee);}));return _getData.apply(this,arguments);}var AnimeContext=/*#__PURE__*/createContext(\"animeContext\");export default function AnimeProvider(_ref){var children=_ref.children;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),chosen=_useState2[0],setChosen=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),query=_useState4[0],setQuery=_useState4[1];var _useQuery=useQuery({queryKey:[\"animeData\",query],queryFn:function queryFn(){return getData(query);}}),isLoading=_useQuery.isLoading,data=_useQuery.data;function handleSearch(queryValue){setQuery(queryValue);}function handleChoice(chosenAnime){setChosen(chosenAnime);}function handleSort(sortType){var _data$data,_data$data2;switch(sortType){case\"name\":data===null||data===void 0?void 0:(_data$data=data.data)===null||_data$data===void 0?void 0:_data$data.result.slice().sort(function(a,b){return a.title.localeCompare(b.title);});break;case\"epi\":data===null||data===void 0?void 0:(_data$data2=data.data)===null||_data$data2===void 0?void 0:_data$data2.result.slice().sort(function(a,b){return(a===null||a===void 0?void 0:a.episodes)-(b===null||b===void 0?void 0:b.episodes);});break;default:console.log(\"something Went Wrong\");}}var value={handleSearch:handleSearch,handleChoice:handleChoice,handleSort:handleSort,query:query,isLoading:isLoading,data:data,chosen:chosen};return/*#__PURE__*/_jsx(AnimeContext.Provider,{value:value,children:children});}export function useAnime(){var value=useContext(AnimeContext);if(!value){throw new Error(\"You Are Using The Context Outside The Provider\");}return value;}","map":{"version":3,"names":["useContext","useState","useQuery","createContext","jsx","_jsx","getData","_x","_getData","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","query","res","data","wrap","_callee$","_context","prev","next","fetch","concat","sent","ok","Error","json","abrupt","stop","AnimeContext","AnimeProvider","_ref","children","_useState","_useState2","_slicedToArray","chosen","setChosen","_useState3","_useState4","setQuery","_useQuery","queryKey","queryFn","isLoading","handleSearch","queryValue","handleChoice","chosenAnime","handleSort","sortType","_data$data","_data$data2","result","slice","sort","a","b","title","localeCompare","episodes","console","log","value","Provider","useAnime"],"sources":["C:/Users/mo7am/OneDrive/Desktop/AnimeU-main/AnimeU-main/src/Context/AnimeContext.js"],"sourcesContent":["import { useContext, useState } from \"react\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { createContext } from \"react\";\r\n\r\nasync function getData(query) {\r\n  let res;\r\n  if (query !== \"\") {\r\n    res = await fetch(`https://api.jikan.moe/v4/anime?q=${query}&sfw=true`);\r\n  } else {\r\n    res = await fetch(`https://api.jikan.moe/v4/anime?q&sfw=true`);\r\n  }\r\n\r\n  if (!res.ok) {\r\n    throw new Error(\"Response Was not Okay\");\r\n  }\r\n\r\n  const data = await res.json();\r\n  return data;\r\n}\r\n\r\nconst AnimeContext = createContext(\"animeContext\");\r\n\r\nexport default function AnimeProvider({ children }) {\r\n  const [chosen, setChosen] = useState({});\r\n  const [query, setQuery] = useState(\"\");\r\n  const { isLoading, data } = useQuery({\r\n    queryKey: [\"animeData\", query],\r\n    queryFn: () => getData(query),\r\n  });\r\n\r\n  function handleSearch(queryValue) {\r\n    setQuery(queryValue);\r\n  }\r\n\r\n  function handleChoice(chosenAnime) {\r\n    setChosen(chosenAnime);\r\n  }\r\n\r\n  function handleSort(sortType) {\r\n    switch (sortType) {\r\n      case \"name\":\r\n        data?.data?.result\r\n          .slice()\r\n          .sort((a, b) => a.title.localeCompare(b.title));\r\n        break;\r\n      case \"epi\":\r\n        data?.data?.result.slice().sort((a, b) => a?.episodes - b?.episodes);\r\n        break;\r\n      default:\r\n        console.log(\"something Went Wrong\");\r\n    }\r\n  }\r\n\r\n  const value = {\r\n    handleSearch,\r\n    handleChoice,\r\n    handleSort,\r\n    query,\r\n    isLoading,\r\n    data,\r\n\r\n    chosen,\r\n  };\r\n\r\n  return (\r\n    <AnimeContext.Provider value={value}>{children}</AnimeContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useAnime() {\r\n  const value = useContext(AnimeContext);\r\n\r\n  if (!value) {\r\n    throw new Error(\"You Are Using The Context Outside The Provider\");\r\n  }\r\n\r\n  return value;\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}